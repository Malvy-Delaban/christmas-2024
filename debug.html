<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="sprites/misc/pokeball_icon.png" sizes="32x32">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="popup.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <title>Pokemon Adventure</title>
</head>

<!-- INITIALIZE DATASETS -->
<script src="dataset/items_dataset.js"></script>
<script src="dataset/types_dataset.js"></script>
<script src="dataset/rarities_dataset.js"></script>
<script src="dataset/pokemon_dataset.js"></script>
<script src="dataset/map_cases_dataset.js"></script>

<!-- INCLUDE ALL FILES -->
<script src="JS_files/objectsDefinitions.js"></script>
<script src="JS_files/pokemonEvolutionsDefinition.js"></script>
<script src="JS_files/generatePokemonChoice.js"></script>
<script src="JS_files/generateRouteList.js"></script>
<script src="JS_files/commonFunctions.js"></script>
<script src="JS_files/generateYourPokemonsPopup.js"></script>
<script src="JS_files/generatePokemonDetailPopup.js"></script>
<script src="JS_files/generatePutInTeamPopup.js"></script>
<script src="JS_files/generateEvolutionPopup.js"></script>
<script src="JS_files/generateShopPopup.js"></script>
<script src="JS_files/generateConfirmBuyingPopup.js"></script>
<script src="JS_files/generateInventoryPopup.js"></script>
<script src="JS_files/generateStartRoutePopup.js"></script>

<script>
    // Initialize all data / create them / retrieve them
    Setup();
</script>

<style>
    .debug-display {
        width: 100%;
        height: 100%;
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .debug-item {
        height: 5rem;
        width: 5rem;
    }

    .rarity-container {
        margin-bottom: 2rem;
    }

    .rarity-title {
        font-size: 5rem;
        margin-bottom: 0.5rem;
        color: white;
    }
</style>

<body id="body">
</body>

<script>

const debugDisplay = document.createElement('div');

const sortedPokedex = Object.values(pokedex).sort((pokemonA, pokemonB) => {
    // return pokemonB.rarity.strength - pokemonA.rarity.strength;
    return (pokemonB.max_hp_lvl1 + pokemonB.attack_lvl1) - (pokemonA.max_hp_lvl1 + pokemonA.attack_lvl1);
});

let currentRarity = null;
let rarityContainer = null;

sortedPokedex.forEach(pokemon => {
    // if (currentRarity !== pokemon.rarity.strength) {
    //     currentRarity = pokemon.rarity.strength;

    //     rarityContainer = document.createElement('div');
    //     rarityContainer.className = 'rarity-container';

    //     const rarityTitle = document.createElement('h2');
    //     rarityTitle.className = 'rarity-title';
    //     rarityTitle.textContent = `Rarity : ${pokemon.rarity.name}`;
    //     rarityTitle.style.color = pokemon.rarity.color;
    //     rarityContainer.appendChild(rarityTitle);

    //     debugDisplay.appendChild(rarityContainer);
    // }

    // Create the image element for the Pok√©mon
    const my_img = document.createElement('img');
    my_img.className = 'debug-item';
    const key = getKeyPokedexFromId(pokemon.id);
    my_img.src = GetSpriteByPokemon(key, false);
    my_img.style.backgroundColor = pokemon.type.color;

    if (pokemon.rarity.name !== "LEGENDARY" && pokemon.evolving_pokemon.length == 0)
        debugDisplay.appendChild(my_img);
    // rarityContainer.appendChild(my_img);
});

// Append the entire debug display to the body
document.body.appendChild(debugDisplay);
</script>
</html>